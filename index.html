<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=1040">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta name="keywords" content="python,wsgi,framework,web application,web service">
<meta itemprop="description" name="description" content="webpie is a Python web application development framework">
<meta name="author" content="Igor Mandrichenko">
<title>WebPie - web application framework for Python</title>
<link rel="stylesheet" href="style.css"/>




<link rel="stylesheet" href="highlight/github.css">
<script src="highlight/highlight.min.js"></script>

<!--
<link rel="stylesheet"
      href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.2/styles/default.min.css">
<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.2/highlight.min.js"></script>
-->

<script>hljs.initHighlightingOnLoad();</script>
</head>

<body>

<div class="container">

    <div id="banner">
        <h1><span class="webpie">WebPie</span></h1>
    </div>


    <table class="layout">
        <tr>
            <td class="main">
                <p><span class="webpie">WebPie</span> is a simple, intuitive, object-oriented web applications development framework for Python. 
                <span class="webpie">WebPie</span> helps you develop web applications quickly and structure them in terms of classes
                to organize your code and development effort more efficiently.
                </p>

                <h2>Hello, world!</h2>

                <p>Here is the "Hello World!" web application in <span class="webpie">WebPie</span>:</p>

                <pre>
                <code class="python">

                    from webpie import WPApp, WPHandler                       #1

                    class Greeter(WPHandler):                                 #2
                    
                        def hello(self, request, relpath, **args):            #3
                            return "Hello, World!\n"                          #4

                    application = WPApp(Greeter)                              #5
                    application.run_server(8080)                              #6

                </code>
                </pre>

                <p>Here is what we just did, line by line:

                    <ul class=nobullet>
                        <li>#1 -- Import class definitions.</li>
        
                        <li>#2 -- Define your request handler class.</li>
    
                        <li>#3 -- Define a handler method. This method name will be mapped to the element of the URI path.</li>
    
                        <li>#4 -- Return the response body.
                        </li>
    
                        <li>#5 -- Create your web server application.
                        </li>
                        <li>#6 -- Run run the applicatoon as a HTTP server listening on port 8080.
                        </li>
                    </ul>
                </p>

                <p>If you run this script, it will respond to "/hello" URI:</p>

                <pre>
                <code class="shell">
                    $ curl http://localhost:8080/hello
                    Hello, World!
                    $

                </code>
                </pre>


                <h2>WSGI</h2>

                <p>
                    <span class="webpie">WebPie</span> application is a standard WSGI application object. It can be plugged into any HTTP server which accepts
                    WSGI applications, such as nginx/uWSGI or Apache httpd/mod_wsgi. For example, here is how you can run
                    a WebPie application under uWSGI:
                </p>
                    
                <pre>
                <code class="python">
                    # clock.py

                    from webpie import WPApp, WPHandler                       
                    import time

                    class Clock(WPHandler):                                

                        def time(self, request, relpath):          
                            return time.ctime()

                    app = WPApp(Clock)                             

                </code>
                </pre>
                    
                <pre>
                <code class="shell">
                    $ uwsgi --http :8080 --wsgi-file clock.py &
                    
                    $ curl http://localhost:8080/time
                    Fri Jun 19 11:26:53 2020
                    $

                </code>
                </pre>

                <h2>URI Structure</h2>

                <p>If you want to combine the Greeter and the Clock into a single web server, you can do it
                    by builidng a tree of the request handlers:
                </p>

                <pre>
                <code class="python">
                    from webpie import WPApp, WPHandler                       
                    import time

                    class Clock(WPHandler):                                

                        def time(self, request, relpath):          
                            return time.ctime()

                    class Greeter(WPHandler):                                
                    
                        def hello(self, request, relpath, **args):           
                            return "Hello, World!\n"           
                            
                    class Combined(WPHandler):
                    
                        def __init__(self, app):
                            WPHandler.__init__(self, request, app)
                            self.clock = Clock(request, app)
                            self.greet = Greeter(request, app)

                    WPApp(Combined).run_server(8080)                         

                </code>
                </pre>

                <p>If you run this application, it will respond to both kinds of requests and the URI structure will reflect the nested handler structure:</p>

                <pre>
                <code class="shell">
                    $ curl http://localhost:8080/clock/time
                    Fri Jun 19 11:26:53 2020
                    
                    $ curl http://localhost:8080/greet/hello
                    Hello, World!
                    $
                    
                </code>
                </pre>
                
                <p>Notice that URI path element <span class="code">clock</span> maps to the <span class="code">Combined</span>'s 
                    <span class="code">self.clock</span> 
                    member, and similarily URI element <span class="code">greet</span> corresponds to the
                    <span class="code">Combined</span>'s <span class="code">self.greet</span> member.
                </p>
                
                <p>The fact that URI structure maps directly onto the handler's class structure and that each handler is responsible for
                    its own URI path subtree makes it possible to use relative URIs inside the response generated by the handler. 
                    For example, let's say you have a handler responsible for user authentication:
                </p>

                <pre>
                <code class="python">
                    from webpie import WPApp, WPHandler                       

                    class Auth(WPHandler):                                
                    
                        def login_form(self, request, relpath, message=None, **args):           
                            return login_form
                            
                        def do_login(self, request, relpath, **args):
                            # read the login_form and authenticate the user
                            if authenticated:
                                # login OK - go back to the top handler
                                self.redirect("../index")       
                            else:
                                # try again
                                self.redirect("./login_form?message=Login+failed")
                                
                    class Top(WPHandler):
                    
                        def __init__(self, request, app):
                            WPHandler.__init__(self, request, app)
                            self.auth = Auth(request, app)
                            
                        def index(self, request, relpath, **args):
                            # main entry point
                            

                    app = WPApp(Top)                        

                </code>
                </pre>

                <p>The <span class="code">Top</span> handler can use relative URI <span class="code">"./auth/login_form"</span> to refer to the login form shown by
                    the authentication handler. And the login form can refer to the actual authentication menthod <span class="code">do_login</span>
                    as <span class="code">"./do_login"</span>:
                </p>

                <pre>
                    <code class="html">
                    
                        &lt;html&gt;
                        &lt;!-- login form --&gt;
                        ...
                            &lt;form action="./do_login"&gt;
                                ...
                            &lt;/form&gt;
                        ...
                        &lt;/html&gt;
                    </code>
                </pre>

                <pre>
                    <code class="html">
                    
                        &lt;html&gt;
                        &lt;!-- main page --&gt;
                        ...
                            &lt;a href="./auth/login_form"&gt;log in&lt;a&gt;
                        ...
                        &lt;/html&gt;
                    </code>
                </pre>
                
            <h2>Other Features</h2>
            
            <ul>
                <li><span class="webpie">WebPie</span> lets you build multi-threaded applications</li>
                <li>Sessions support with persistent data storage</li>
                <li><span class="webpie">WebPie</span> uses WebOb to parse and represent the received HTTP request and to form the response</li>
                <li>HTTP request query parameters are passed to the web service methods as Python named arguments</li>
                <li>Jinja2 - friendly</li>
                <li>Built-in multi-treaded HTTP/HTTPS server with thread control, which can run as a process or a thread</li>
                <li>HTTP server supports access to static content</li>
                <li>WebSockets support</li>
            </ul>
                
        </td>   <!-- main -->
            <td class="right">
                <p id="links">
                  <a href="https://webpie.readthedocs.io/">Documentation</a><br/>
                  <a href="https://github.com/webpie/webpie">Source</a><br/>
                  <a href="https://pypi.python.org/pypi/webpie">PyPi</a><br/>
                </p>
            </td>   <!-- right -->
        </tr>       <!-- first row -->
    </table>
</div>      <!-- container -->


      <script>
          function trim_white(tag, cls)
          {
              var elements = document.getElementsByTagName(tag);
              for (var e of elements)
              {
                  if( e.className == cls)
                  {
                      var text = e.innerHTML;
                      var lines = [];
                      var nwhite = null;
                      for( var line of text.split("\n") )
                      {
                          var trimmed = line.trim();
                          if( trimmed != "" )
                          {
                              const leading_space = /^\s+/
                              var match = line.match(leading_space);
                              if( match != null )
                              {
                                  const l = match[0].length;
                                  if( nwhite == null || l < nwhite )
                                      nwhite = l;
                              }
                              lines.push(line);
                          }
                          else
                              lines.push("");
                      }

                      var in_leading_white = true;
                      var n_blank = 0;

                      var out_lines = [];

                      for( line of lines )
                      {
                          if( line != "" )
                          {
                              if( in_leading_white )
                                  in_leading_white = false;
                              else
                              {
                                  var i;
                                  for( i=0; i<n_blank; i++ )
                                      out_lines.push("");
                              }
                              n_blank = 0;
                              out_lines.push(line.substr(nwhite));
                          }
                          else
                              n_blank ++;
                      }
                  
                      e.innerHTML = out_lines.join("\n");
                  }
              }
          }
          
          trim_white("code", "python");
          trim_white("code", "shell");
          trim_white("code", "html");
      </script>

</body>
</html>